<!DOCTYPE html>
<html>
<head>
<title>This tests that we can clear selection properly on dynamic content with first letter.</title>
<style>
.class1::first-letter {
  float: right;
}

#innerBody {
  column-count: 2;
  height: 100px;
}

</style>
</head>
<body>
<li id=li style="float: right;">Pass if<span style="float: right;"></span></li><body id=innerBody><span id=span style="display: none;"></span>no crash.</body>
<script>
  if (window.testRunner)
    testRunner.dumpAsText();
  innerBody.style.webkitWritingMode = "vertical-rl";
  innerBody.className = "class1";

  document.getSelection().setBaseAndExtent(span, 0, innerBody, innerBody.childNodes.length);
  window.getSelection().modify("extend", "left", "documentboundary");
  innerBody.scrollIntoViewIfNeeded(true);
  li.style.cssText = "float: right; height: 40px; width: 40px;";
  document.body.offsetHeight;
  li.style.cssText = "";
</script>
</body>
</html>
